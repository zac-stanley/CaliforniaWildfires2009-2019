<!DOCTYPE html>
<html>

<head>
	<meta charset=utf-8 />
	<title>Lab 07 â€” US Power Plants</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	<link rel='icon' href='https://newmapsplus.github.io/favicon.ico' type='image/x-icon' />

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/leaflet.css">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,900i" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Michroma|Patua+One|Roboto&display=swap" rel="stylesheet"> 

	<style>
		/* 
			UKy Colors: 
            #c7c9c8 light gray 
            #63666a dark gray
            #15397f dark blue
            #009bda light blue
            #0033a0 official blue
				*/
				
		
				body {
					margin: 0;
					padding: 0;
					background: #222;
					/* dark */
					font-family: Lato, sans-serif;
					font-size: 100%;
					color: #ddd;
					/* light */
				}
		
				header {
					top: 0px;
					width: 80%;
					margin: 10px auto 10px auto;
				}

				select {
					width: 260px;
				}
		
				h1 {
					display: inline-block;
					margin-right: 20px;
					color: #001323;
				}
		
				h2 {
					display: inline-block;
					color: #001323;
				}
		
				#map {
					position: absolute;
					top: 0;
					bottom: 0;
					width: 100%;
					background: rgba(63, 63, 63, 0.9);
					/* with transparency */
				}
		
				a {
					color: #004A8B;
				}
		
				a:hover {
					color: rgb(67, 69, 71);
					text-decoration: none;
				}
		
				footer {
					padding: 6px 10%;
					width: 80%;
				}
		
				p {
					font-size: 1em;
					color: #001323;
				}
				
				.leaflet-bar a {
					/* Override the default style for Leaflet's zoom  */
					background: rgba(100, 100, 100, 0.9);
					color: rgba(244, 244, 244, 0.8);
				}

		/* When browser is 900px wide or less */
		@media screen and (max-width: 900px) {

			.first-column,
			.second-column {
				width: 100%;
			}
		}
	</style>
</head>

<body>

	<header>
	<!--	<h1>California Wildfires, 2009-2019</h1> -->
	</header>
	<section>
		<div class="row">
			<div id="map"></div>


			<!--	<p><b>Social links</b></p>
				<ul>
					<li>See my projects on GitHub: <a href="https://github.com/zac-stanley">Zac Stanley</a></li>
					<li>Follow me on Twitter: <a href="https://twitter.com/zac_stanley">CartoStan</a></li>
					<li>Connect on LinkedIn: <a href="https://www.linkedin.com/in/zac-stanley-gisp-a6208022/">Zac Stanley, GISP</a>.
					</li>
				</ul> -->



		</div>
	</section>
<!--<footer>
		<hr>

		<a href="https://newmapsplus.github.io">
			<img src="https://newmapsplus.github.io/assets/graphics/logo-2018-nmp-75px-h-gray.png" alt="University of Kentucky Geography">
		</a>

		<a href="https://uky-gis.github.io">
			<img src="https://newmapsplus.github.io/assets/graphics/logo-2018-geography-75px-h.png" alt="University of Kentucky Geography">
		</a>

	</footer>-->

	<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
	<script src="geoJSONs/CAFire_2009_2019.js"></script>
	<script src="geoJSONs/States.js"></script>
  <script>
  		// map options
		var options = {
				center: [37.38611, -119.44944],
				zoomSnap: .11,
				zoom: 6.7
			}

			// create a Leaflet map in our division container with id of 'map'
			var map = L.map('map', options);

			// Leaflet providers base map URL
		//	var basemap_source =
    //  'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png'

			// Leaflet providers attributes
		//	var basemap_options = {
		//		attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
		//		subdomains: 'abcd',
    //    maxZoom: 19
    //  };
      // request some basemap tiles and add to the map
    //  var tiles = L.tileLayer(basemap_source, basemap_options).addTo(map);

      var styles = {
				weight: 1,
				stroke: 1,
        fillOpacity: 1
			}

			var stateLayer = L.geoJson(states, {
				style: function (feature) {
          return {
            // Let's experiment with these colors shortly
            // color: '#222222', // Gray
            color: '#333333', // White
            // Make line weight larger than the county outline
						weight: 2,
						fillOpacity: 0.1,
						fillColor: '#CCCCCC',
            // This property allows us control interactivty of layer
            interactive: false
					};
									},
				filter: function(feature){
					if (feature.properties.NAME == "California"){
						return feature;
					}
				}
								


				})
				var zoomExCa = stateLayer.getBounds()

				map.fitBounds(zoomExCa, {
					maxzoom: 7
				})
				stateLayer.addTo(map)
	
			//	drawMap(stateLayer);
								



			
		
			

      var lightning = L.geoJson(fires, {
        pointToLayer: function(feature, latlng) {
          return L.circleMarker(latlng, styles);
        },
        filter: function(feature) {
          if (feature.properties.STATISTICA == "Lightning") {
                return feature;
          }
        },
        style: function(feature) {
          return {
            color: '#F0AA22',
            fillColor: '#D98A29',
            radius: getRadius(feature.properties.Acres)
          }
        },
      onEachFeature: function(feature, layer) {
       layer.on('mouseover', function() {
          layer.setStyle({
             fillColor: 'white'
            });
          });
          layer.on('mouseout', function(){
            layer.setStyle({
              fillColor: '#D98A29'
            });
          });
          
          popup = `<h4>${feature.properties.FIRE_NAME} Fire</h4><br>Cause: ${feature.properties.STATISTICA}<br> Size: ${feature.properties.Acres.toLocaleString()}<br> Year: ${feature.properties.DISCOVER_Y}`
          
            layer.bindTooltip(popup)
          }
         

}).addTo(map); 

var misc = L.geoJson(fires, {
  pointToLayer: function(feature, latlng) {
    return L.circleMarker(latlng, styles);
  },
  filter: function(feature) {
    if (feature.properties.STATISTICA == "Miscellaneous") {
          return feature;
    }
  },
  style: function(feature) {
    return {
      color: '#F0AA22',
      fillColor: '#404259',
      radius: getRadius(feature.properties.Acres)
    }
  },
onEachFeature: function(feature, layer) {
 layer.on('mouseover', function() {
    layer.setStyle({
       fillColor: 'black'
      });
    });
    layer.on('mouseout', function(){
      layer.setStyle({
        fillColor: '#404259'
      });
    });

    popup = `<h4>${feature.properties.FIRE_NAME} Fire</h4><br>Cause: ${feature.properties.STATISTICA}<br> Size: ${feature.properties.Acres.toLocaleString()}<br> Year: ${feature.properties.DISCOVER_Y}`
    
      layer.bindTooltip(popup)
    }  
}).addTo(map); 

var equipment = L.geoJson(fires, {
  pointToLayer: function(feature, latlng) {
    return L.circleMarker(latlng, styles);
  },
  filter: function(feature) {
    if (feature.properties.STATISTICA == "Equipment Use") {
          return feature;
    }
  },
  style: function(feature) {
    return {
      color: '#F0AA22',
      fillColor: '#9392A6',
      radius: getRadius(feature.properties.Acres)
    }
  },
onEachFeature: function(feature, layer) {
 layer.on('mouseover', function() {
    layer.setStyle({
       fillColor: 'black'
      });
    });
    layer.on('mouseout', function(){
      layer.setStyle({
        fillColor: '#9392A6'
      });
    });
        
    popup = `<h4>${feature.properties.FIRE_NAME} Fire</h4><br>Cause: ${feature.properties.STATISTICA}<br> Size: ${feature.properties.Acres.toLocaleString()}<br> Year: ${feature.properties.DISCOVER_Y}`
    
      layer.bindTooltip(popup)
    }  
}).addTo(map);   

var arson = L.geoJson(fires, {
  pointToLayer: function(feature, latlng) {
    return L.circleMarker(latlng, styles);
  },
  filter: function(feature) {
    if (feature.properties.STATISTICA == "Arson") {
          return feature;
    }
  },
  style: function(feature) {
    return {
      color: '#F0AA22',
      fillColor: '#404259',
      radius: getRadius(feature.properties.Acres)
    }
  },
onEachFeature: function(feature, layer) {
 layer.on('mouseover', function() {
    layer.setStyle({
       fillColor: 'black'
      });
    });
    layer.on('mouseout', function(){
      layer.setStyle({
        fillColor: '#404259'
      });
    });
        
    popup = `<h4>${feature.properties.FIRE_NAME} Fire</h4><br>Cause: ${feature.properties.STATISTICA}<br> Size: ${feature.properties.Acres.toLocaleString()}<br> Year: ${feature.properties.DISCOVER_Y}`
    
      layer.bindTooltip(popup)
    }  
}).addTo(map); 

var camp = L.geoJson(fires, {
  pointToLayer: function(feature, latlng) {
    return L.circleMarker(latlng, styles);
  },
  filter: function(feature) {
    if (feature.properties.STATISTICA == "Campfire") {
          return feature;
    }
  },
  style: function(feature) {
    return {
      color: '#F0AA22',
      fillColor: '#D94D1A',
      radius: getRadius(feature.properties.Acres)
    }
  },
onEachFeature: function(feature, layer) {
 layer.on('mouseover', function() {
    layer.setStyle({
       fillColor: 'black'
      });
    });
    layer.on('mouseout', function(){
      layer.setStyle({
        fillColor: '#D94D1A'
      });
    });
        
    popup = `<h4>${feature.properties.FIRE_NAME} Fire</h4><br>Cause: ${feature.properties.STATISTICA}<br> Size: ${feature.properties.Acres.toLocaleString()}<br> Year: ${feature.properties.DISCOVER_Y}`
    
      layer.bindTooltip(popup)
    }  
}).addTo(map); 

      function getRadius(area) {
        var radius = Math.sqrt(area/Math.PI);
        return radius * .17;
			}

			var sourceLayers = {
				"<b style= 'color:#D98A29'>Lightning</b>": lightning,
				"<b style= 'color:#404259'>Miscellaneous</b>": misc,
				"<b style= 'color:#9392A6'>Equipment</b>": equipment,
				"<b style= 'color:#404259'>Arson</b>": arson,
				"<b style= 'color:##D94D1A'>Campfire</b>": camp
			}
			L.control.layers(null, sourceLayers, {collapsed: false}).addTo(map);
      
      </script>
      	</body>
	
	      </html>
